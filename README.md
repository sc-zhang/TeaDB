## Introduction
TeaDB is a minhash fingerprint database of tea plants which contain fingerprints of 735 samples.

## Installation
1. Install the query program
```bash
git clone https://github.com/sc-zhang/TeaDB.git
cd TeaDB/src
make install PREFIX=/path/to/install
```

2. Download the database  
DB file could be found in following links:  
- Google Drive: https://drive.google.com/file/d/1zg_h8crl0f-YbVhXVPunofCxTJjBPYCa/view?usp=drive_link
- Baidu Netdisk: https://pan.baidu.com/s/1nEWYqXQLYvSaEojf-BQNyg?pwd=94km

## Usage
1. Command
```bash
/path/to/install/bin/query_db <db_file> <query_file> [pre_cnt]
```
**db_file** is the path of database file
**query_file** is the jac file generated by [mike](https://github.com/Argonum-Clever2/mike)
**pre_cnt** is the number of fingerprints used for quering, if not set, all fingerprints would be used.

2. Example
```bash
/path/to/install/bin/query_db TEA.db query.jac
```

## Result
1. the top 10 records with highest Jaccard similarity with query jac would be print. The result is like below

|ID|Chinese name|English name|Species|Group|Country|Area|Similarity|
|---|---|---|---|---|---|---|---|
|C11A|野生红芽苦茶|yeshengdayekucha|C.sinensis.var.sinensis|CSS.G1|China|Fujian|1|
|C10A|野生大叶苦茶|yeshengdayekucha|C.sinensis.var.sinensis|CSS.G1|China|Fujian|0.357936|
|C7A|野生白芽苦茶1|yeshengbaiyakuhca1|C.sinensis.var.sinensis|CSS.G1|China|Fujian|0.314573|
|C8A|野生白芽苦茶2|yeshengbaiyakuhca2|C.sinensis.var.sinensis|CSS.G1|China|Fujian|0.314535|
|C14A|吉土小叶苦茶|jituxiaoyekucha|C.sinensis.var.sinensis|CSS.G1|China|Guangdong|0.292489|
|GZD3A|八仙|baxian|C.sinensis.var.sinensis|CSS.G1|China|Fujian|0.28172|
|K19A|马图茶|matucha|C.sinensis.var.sinensis|CSS.G1|China|Guangdong|0.280125|
|K109A|苦味白牡丹1号|kuweibaimudan1hao|C.sinensis.var.sinensis|CSS.G1|China|Fujian|0.279485|
|GZD8A|輋门|fengmen|C.sinensis.var.sinensis|CSS.G1|China|Guangdong|0.275496|
|K18A|黄叶水仙|huangyeshuixian|C.sinensis.var.sinensis|CSS.G1|China|Fujian|0.271065|

## Optional:
### Create Own Database
1. generate jac files with [mike](https://github.com/Argonum-Clever2/mike)

2. run create_db.py
```bash
usage: create_db.py [-h] -l LIST -i INPUT -o OUTPUT

options:
  -h, --help           show this help message and exit
  -l, --list LIST      Input infomation list
  -i, --input INPUT    Input jac directory
  -o, --output OUTPUT  Output db file
```

3. example
```bash
/path/to/install/create_db.py -l info.list -i jac_dir -o TEA.db
```

4. the info.list file should contain 7 columns, which should be:

|ID|Chinese name|English name|Species|Group|Country|Area|
|---|---|---|---|---|---|---|

> **Notice:** ID should be unique for all samples.
